<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="styles/cliente.css" />
    <link rel="stylesheet" href="styles/index.css" />
    <script src="scripts/script.js"></script>
    <title>Editar Clientes</title>
  </head>

  <body onload="pegarParametro()">
    <nav class="navbar navbar-expand-lg navbar-light bg-dark fixed-top">
      <div class="container">
        <img
          src="./images/kisspng-capgemini-logo-business-insuretech-connect-cfo-ris-5b3e023ce468a9.7869716015307904609356.jpg"
          alt="Capgemini"
          width="100"
          height="60"
        />
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse navcolor"
          id="navbarSupportedContent"
        >
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="index.html"
                >Home</a
              >
            </li>
            <li class="nav-item dropdown">
              <a
                class="dropcolor nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Menu
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li>
                  <a class="dropdown-item" href="cliente.html">Cliente</a>
                </li>
                <li><a class="dropdown-item" href="consulta.html">Consulta</a></li>

                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    < class="form">
      <h1>Editar Cliente</h1>
      <form>
        <div class="align text-center mb-4 text-secondary">
          <div class="form-check form-check-inline d-inline-block">
            <input
              class="form-check-input-radio"
              type="radio"
              name="tipo"
              id="tipo"
              value="1"
            />
            <label class="form-check-label">Pessoa Física</label>
          </div>
          <div class="form-check form-check-inline d-inline-block">
            <input
              class="form-check-input-radio"
              type="radio"
              name="tipo"
              id="tipo"
              value="2"
            />
            <label class="form-check-label">Pessoa Jurídica</label>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-4">
            <div class="form-group">
              <input
                name="nome"
                id="nome"
                type="text"
                class="form-control"
                placeholder="Nome"
                required
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="email"
                id="email"
                type="email"
                class="form-control"
                placeholder="Email"
                required
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="cpfOuCnpj"
                id="cpfOuCnpj"
                type="text"
                class="form-control"
                placeholder="CPF ou CNPJ"
                required
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="telefone"
                id="telefone"
                type="text"
                class="form-control"
                placeholder="Telefone"
                required
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="logradouro"
                id="logradouro"
                type="text"
                class="form-control"
                placeholder="Logradouro"
                required
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="numero"
                id="numero"
                type="text"
                class="form-control"
                placeholder="Número"
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="complemento"
                id="complemento"
                type="text"
                class="form-control"
                placeholder="Complemento"
              />
              <div class="line"></div>
            </div>
            <div class="form-group">
              <input
                name="bairro"
                id="bairro"
                type="text"
                class="form-control"
                placeholder="Bairro"
              />
              <div class="line"></div>
            </div>
            <select name="estado" id="estado" class="form-select" aria-label="">
              <option value="0">Selecione o Estado</option>
              <option>Pernambuco</option>
            </select>
            <select name="cidade" id="cidade" class="form-select" aria-label="">
              <option>Selecione a cidade</option>
              <option>Recife</option>
            </select>
            <div class="form-group">
              <input
                name="cep"
                id="cep"
                type="text"
                class="form-control"
                placeholder="CEP"
                required
              />
              <div class="line"></div>
            </div>
            <div class="d-flex justify-content-center">
              <button onclick="gravar()" class="btn btn-danger" type="submit">
                Salvar
              </button>
              <button onclick="apagar()" class="btn btn-danger" type="submit">
                Apagar
              </button>
              <button oncliclkclass="cancelar">Voltar</button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <script>
      function pegarParametro() {
        const urlParams = new URLSearchParams(window.location.search);
        let idcliente = urlParams.get("id");

        let ob = new Cliente();
        ob.consultarPeloId(idcliente, preencheForm);
      }

      function preencheForm(data) {
        let obj = JSON.parse(data);

        document.getElementById("tipo").value = obj.tipo
        document.getElementById("nome").value = obj.nome
        document.getElementById("email").value = obj.email
        document.getElementById("cpfOuCnpj").value = obj.cpfOuCnpj
        document.getElementById("telefone").value = obj.telefone
        document.getElementById("logradouro").value = obj.logradouro
        document.getElementById("numero").value = obj.numero
        document.getElementById("complemento").value = obj.complemento
        document.getElementById("bairro").value = obj.bairro
        document.getElementById("estados").value = obj.estados
        document.getElementById("cidades").value = obj.cidades
        document.getElementById("cep").value = obj.cep
      }

      function gravar() {
            var tipo = document.getElementById("tipo").value
            var nome = document.getElementById("nome").value
            var email = document.getElementById("email").value
            var cpfOuCnpj = document.getElementById("cpfOuCnpj").value
            var telefone = document.getElementById("telefone").value
            var logradouro = document.getElementById("logradouro").value
            var numero = document.getElementById("numero").value
            var complemento = document.getElementById("complemento").value
            var bairro = document.getElementById("bairro").value
            var estados = document.getElementById("estados").value
            var cidades = document.getElementById("cidades").value
            var cep = document.getElementById("cep").value


            let obj = new Cliente (0, tipo, nome, email, cpfOuCnpj,  telefone, logradouro, numero, complemento, bairro, estados, cidades, cep)

        obj.update();
      }

      function apagar() {
        let ob = new Cliente();
        ob.excluir(document.getElementsByTagName("input")[0].value);
      }
    </script>
  </body>
</html>
